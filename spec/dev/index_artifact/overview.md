# index_artifact 구현 계획

## 개요

`index_artifact` MCP 도구의 구현을 3단계로 나누어 진행합니다. 각 단계는 점진적으로 기능을 확장하며, 이전 단계의 결과물을 기반으로 구축됩니다.

## 3단계 구현 계획

### 1단계: 소스 코드 저장 및 기본 파일 작업 지원

**목표**: 등록된 소스를 파일 시스템에 저장하고 기본적인 파일 탐색 기능 제공

**구현 내용**:
- 등록된 소스(JAR/디렉토리/Git)를 `code/{group_id}/{artifact_id}/{version}/` 구조로 복사/추출
- JAR 파일 압축 해제
- Git 리포지토리 클론
- 로컬 디렉토리 복사
- 기본적인 파일 탐색 도구들 동작 가능하게 구현:
  - `list_folder_tree`: 디렉토리 구조 탐색
  - `get_file`: 파일 내용 조회
  - `search_file_names`: 파일명 패턴 검색
  - `search_file_content`: 파일 내용 검색

**특징**:
- Java/Kotlin 파싱 없이 순수 파일 시스템 작업만 수행
- 빠른 구현 및 테스트 가능
- 파일 기반 도구들의 즉시 사용 가능

### 2단계: Universal Ctags 인덱싱

**목표**: Ctags를 사용해 소스 코드의 심볼 정보를 추출하고 구조화된 데이터 제공

**구현 내용**:
- Universal Ctags를 사용한 소스 코드 분석
- 클래스, 인터페이스, 메소드, 필드 등의 심볼 정보 추출
- 패키지 구조 파악 및 타입 정보 수집
- 추출된 정보를 구조화된 형태(DB 또는 JSON)로 저장
- 다음 도구들 구현:
  - `list_packages`: 패키지 계층 구조 조회
  - `list_types`: 패키지 내 타입 목록
  - `list_methods`: 클래스/인터페이스 메소드 목록
  - `list_fields`: 클래스/인터페이스 필드 목록

**특징**:
- Ctags의 빠른 분석 속도 활용
- 기본적인 심볼 정보 제공
- 대용량 코드베이스 처리 가능

### 3단계: 상세 구문 분석

**목표**: AST 파싱을 통한 정확하고 상세한 코드 분석 정보 제공

**구현 내용**:
- AST(Abstract Syntax Tree) 파싱을 통한 정밀 분석
- 정확한 메소드 시그니처 추출
- Import 문 분석
- 상속 관계 및 인터페이스 구현 관계 파악
- 메소드 바디 및 필드 초기화 코드 추출
- 고급 도구들 구현:
  - `get_type_source`: 타입의 완전한 소스 코드
  - `get_method_source`: 메소드 구현 소스 코드  
  - `get_import_section`: Import 문 분석

**특징**:
- 높은 정확도의 코드 분석
- 복잡한 언어 구조 지원
- IDE 수준의 코드 인사이트 제공

## 구현 우선순위

1. **1단계 우선 구현**: 기본적인 파일 작업 도구들을 먼저 동작시켜 사용자에게 즉시 가치 제공
2. **2단계 확장**: Ctags 기반 심볼 분석으로 구조화된 탐색 기능 추가
3. **3단계 고도화**: AST 분석으로 IDE 수준의 코드 분석 기능 완성

각 단계는 독립적으로 동작하며, 이전 단계의 기능을 유지하면서 점진적으로 확장됩니다.